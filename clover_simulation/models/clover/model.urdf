<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/ubuntu_20_fgdr/catkin_ws/src/clover/clover_description/urdf/clover/clover4.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="clover">
  <!-- [kg] -->
  <link name="base_link"/>
  <!-- Note: For some reason this file relies on base_link_inertia becoming base_link.
         I don't even want to know.
         -sfalexrog
    -->
  <joint name="base_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="base_link_inertia"/>
  </joint>
  <link name="base_link_inertia">
    <inertial>
      <mass value="1.5"/>
      <!-- [kg] -->
      <origin xyz="0 0 0"/>
      <inertia ixx="0.017234499999999996" ixy="0.0" ixz="0.0" iyy="0.017234499999999996" iyz="0.0" izz="0.030624999999999996"/>
    </inertial>
    <visual name="body">
      <origin rpy="0 0 0" xyz="0 0 0.025"/>
      <geometry>
        <!-- Note: Texture files are expected to be in the same directory as the model -->
        <mesh filename="model://clover/meshes/clover4/clover_body_solid.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <!-- Now, a person with some experience in building urdf/xacro files would say something along the lines of:
           "Hey, a link may have multiple visual tags, each with its own material!"
           Hear my answer, o experienced one. First, you are absolutely correct, you may add multiple visual
           elements to a single link. Second, once you try to put some transparency on your visual elements,
           you'll have it vanish into thin fucking air - Gazebo (as of version 9!) gives fuck all about your
           "color" attributes and whatnot. Third, oh, you want to reference the visual element from your
           "gazebo" tag down the line? Well fuck you, buddy, because you can only reference links and joints!
           So yeah, good luck improving this.
           - sfalexrog
      -->
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.35 0.35 0.124"/>
        <!-- [m] [m] [m] -->
      </geometry>
    </collision>
  </link>
  <!-- This link is here for a single reason: to draw transparent parts (oh, and also to be the bane of my existence).
         I'm going to leave helpful comments for the poor soul who's going to attempt to improve this file.
        -sfalexrog
    -->
  <link name="base_guard_link">
    <!-- So we've established we actually need a link. Now, if you look at the SDF spec for some reason
           (much like I did), you'll notice you don't really need much for a link to exist. And that is a
           big fucking lie. Sure, go ahead, create a link without inertial or collision properties,
           see how far that gets you (spoiler: it will get you fucking nowhere, because Gazebo will
           devour your puny link and all that it stands for).
           - sfalexrog
      -->
    <inertial>
      <!-- We give an oh-so-tiny mass to the link to avoid it being destroyed by Gazebo -->
      <mass value="0.015"/>
      <!-- [kg] -->
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <!-- We also give it some inertia, so that the physics engine does not go crazy
             (and to avoid it being devoured by Gazebo)
        -->
      <inertia ixx="1.25e-07" ixy="0.0" ixz="0.0" iyy="1.25e-07" iyz="0.0" izz="1.25e-07"/>
    </inertial>
    <!-- We may want to have proper collision tucked away here at some point, though -->
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.01 0.01 0.01"/>
        <!-- [m] [m] [m] -->
      </geometry>
    </collision>
    <visual>
      <!-- This origin should be the same as in "base_link_inertia" visuals -->
      <origin rpy="0 0 0" xyz="0 0 0.025"/>
      <geometry>
        <mesh filename="model://clover/meshes/clover4/clover_guards_transparent.dae" scale="1 1 1"/>
      </geometry>
      <!-- Let me reiterate that you can't put the "material" tag to any effect -->
    </visual>
  </link>
  <!-- Now, the last thing to do is to attach the base_guard_link to base_link. Since
         base_guard_link has no meaning by itself, it must be fixed rigidly to base_link.
         Except Gazebo absolutely loves "optimizing away" your fixed joints and all
         child links with them! How do we deal with that nonsense? Read on to find out!
         - sfalexrog
    -->
  <joint name="base_guard_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="base_guard_link"/>
  </joint>
  <!-- attach multirotor_base_plugin to the base_link -->
  <gazebo>
    <plugin filename="libgazebo_multirotor_base_plugin.so" name="rosbag">
      <robotNamespace></robotNamespace>
      <linkName>base_link</linkName>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
    </plugin>
  </gazebo>
  <!-- And here's what you've been waiting for: the way to save a fixed joint from
         Gazebo's wrath! You plead for it to save your joint, and it might answer
        (depending on the version, apparently).
        Note that it is done in other places as well.
        - sfalexrog
     -->
  <gazebo reference="base_guard_joint">
    <disableFixedJointLumping>true</disableFixedJointLumping>
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <!-- ...and here's another absolutely terrible idea: you can only set a material for
         the whole link, not for its part. And that's incompatible with URDF's material
         definition. Yeah.
         - sfalexrog
    -->
  <gazebo reference="base_guard_link">
    <material>Polycarbonate</material>
  </gazebo>
  <gazebo reference="base_link">
    <kp>10000.0</kp>
    <kd>10.0</kd>
    <maxVel>10.0</maxVel>
    <minDepth>0.001</minDepth>
  </gazebo>
  <joint name="rotor_0_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0.083 -0.083 0.026"/>
    <axis xyz="0 0 1"/>
    <!-- TODO(ff): not currently set because it's not yet supported -->
    <!-- <limit effort="2000" velocity="${max_rot_velocity}" /> -->
    <parent link="base_link"/>
    <child link="rotor_0"/>
  </joint>
  <!-- TODO(ff): not currently set because it's not yet supported -->
  <!-- <gazebo reference="rotor_${motor_number}_joint"> <axis> <xyz>0 0 1</xyz>
      <limit> <velocity> ${max_rot_velocity} </velocity> </limit> </axis> </gazebo> -->
  <link name="rotor_0">
    <inertial>
      <mass value="0.01"/>
      <!-- [kg] -->
      <inertia ixx="1.95e-06" ixy="0.0" ixz="0.0" iyy="0.000120075" iyz="0.0" izz="0.00012187499999999998"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="model://clover/meshes/clover4/prop_ccw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.005" radius="0.06"/>
        <!-- [m] -->
      </geometry>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libgazebo_motor_model.so" name="front_right_motor_model">
      <robotNamespace></robotNamespace>
      <jointName>rotor_0_joint</jointName>
      <linkName>rotor_0</linkName>
      <turningDirection>ccw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1100</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.06</momentConstant>
      <commandSubTopic>/gazebo/command/motor_speed</commandSubTopic>
      <motorNumber>0</motorNumber>
      <rotorDragCoefficient>0.000175</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>/motor_speed/0</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <!--
        <gazebo_joint_control_pid>
          <p>0.1</p>
          <i>0</i>
          <d>0</d>
          <iMax>0</iMax>
          <iMin>0</iMin>
          <cmdMax>3</cmdMax>
          <cmdMin>-3</cmdMin>
        </gazebo_joint_control_pid>
      -->
    </plugin>
  </gazebo>
  <!-- <gazebo reference="rotor_${motor_number}">
      <material>Gazebo/${color}</material>
    </gazebo> -->
  <joint name="rotor_1_joint" type="continuous">
    <origin rpy="0 0 0" xyz="-0.083 0.083 0.026"/>
    <axis xyz="0 0 1"/>
    <!-- TODO(ff): not currently set because it's not yet supported -->
    <!-- <limit effort="2000" velocity="${max_rot_velocity}" /> -->
    <parent link="base_link"/>
    <child link="rotor_1"/>
  </joint>
  <!-- TODO(ff): not currently set because it's not yet supported -->
  <!-- <gazebo reference="rotor_${motor_number}_joint"> <axis> <xyz>0 0 1</xyz>
      <limit> <velocity> ${max_rot_velocity} </velocity> </limit> </axis> </gazebo> -->
  <link name="rotor_1">
    <inertial>
      <mass value="0.01"/>
      <!-- [kg] -->
      <inertia ixx="1.95e-06" ixy="0.0" ixz="0.0" iyy="0.000120075" iyz="0.0" izz="0.00012187499999999998"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="model://clover/meshes/clover4/prop_ccw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.005" radius="0.06"/>
        <!-- [m] -->
      </geometry>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libgazebo_motor_model.so" name="back_left_motor_model">
      <robotNamespace></robotNamespace>
      <jointName>rotor_1_joint</jointName>
      <linkName>rotor_1</linkName>
      <turningDirection>ccw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1100</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.06</momentConstant>
      <commandSubTopic>/gazebo/command/motor_speed</commandSubTopic>
      <motorNumber>1</motorNumber>
      <rotorDragCoefficient>0.000175</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>/motor_speed/1</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <!--
        <gazebo_joint_control_pid>
          <p>0.1</p>
          <i>0</i>
          <d>0</d>
          <iMax>0</iMax>
          <iMin>0</iMin>
          <cmdMax>3</cmdMax>
          <cmdMin>-3</cmdMin>
        </gazebo_joint_control_pid>
      -->
    </plugin>
  </gazebo>
  <!-- <gazebo reference="rotor_${motor_number}">
      <material>Gazebo/${color}</material>
    </gazebo> -->
  <joint name="rotor_2_joint" type="continuous">
    <origin rpy="0 0 0" xyz="0.083 0.083 0.026"/>
    <axis xyz="0 0 1"/>
    <!-- TODO(ff): not currently set because it's not yet supported -->
    <!-- <limit effort="2000" velocity="${max_rot_velocity}" /> -->
    <parent link="base_link"/>
    <child link="rotor_2"/>
  </joint>
  <!-- TODO(ff): not currently set because it's not yet supported -->
  <!-- <gazebo reference="rotor_${motor_number}_joint"> <axis> <xyz>0 0 1</xyz>
      <limit> <velocity> ${max_rot_velocity} </velocity> </limit> </axis> </gazebo> -->
  <link name="rotor_2">
    <inertial>
      <mass value="0.01"/>
      <!-- [kg] -->
      <inertia ixx="1.95e-06" ixy="0.0" ixz="0.0" iyy="0.000120075" iyz="0.0" izz="0.00012187499999999998"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="model://clover/meshes/clover4/prop_cw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.005" radius="0.06"/>
        <!-- [m] -->
      </geometry>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libgazebo_motor_model.so" name="front_left_motor_model">
      <robotNamespace></robotNamespace>
      <jointName>rotor_2_joint</jointName>
      <linkName>rotor_2</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1100</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.06</momentConstant>
      <commandSubTopic>/gazebo/command/motor_speed</commandSubTopic>
      <motorNumber>2</motorNumber>
      <rotorDragCoefficient>0.000175</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>/motor_speed/2</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <!--
        <gazebo_joint_control_pid>
          <p>0.1</p>
          <i>0</i>
          <d>0</d>
          <iMax>0</iMax>
          <iMin>0</iMin>
          <cmdMax>3</cmdMax>
          <cmdMin>-3</cmdMin>
        </gazebo_joint_control_pid>
      -->
    </plugin>
  </gazebo>
  <!-- <gazebo reference="rotor_${motor_number}">
      <material>Gazebo/${color}</material>
    </gazebo> -->
  <joint name="rotor_3_joint" type="continuous">
    <origin rpy="0 0 0" xyz="-0.083 -0.083 0.026"/>
    <axis xyz="0 0 1"/>
    <!-- TODO(ff): not currently set because it's not yet supported -->
    <!-- <limit effort="2000" velocity="${max_rot_velocity}" /> -->
    <parent link="base_link"/>
    <child link="rotor_3"/>
  </joint>
  <!-- TODO(ff): not currently set because it's not yet supported -->
  <!-- <gazebo reference="rotor_${motor_number}_joint"> <axis> <xyz>0 0 1</xyz>
      <limit> <velocity> ${max_rot_velocity} </velocity> </limit> </axis> </gazebo> -->
  <link name="rotor_3">
    <inertial>
      <mass value="0.01"/>
      <!-- [kg] -->
      <inertia ixx="1.95e-06" ixy="0.0" ixz="0.0" iyy="0.000120075" iyz="0.0" izz="0.00012187499999999998"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="model://clover/meshes/clover4/prop_cw.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.005" radius="0.06"/>
        <!-- [m] -->
      </geometry>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libgazebo_motor_model.so" name="back_right_motor_model">
      <robotNamespace></robotNamespace>
      <jointName>rotor_3_joint</jointName>
      <linkName>rotor_3</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1100</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.06</momentConstant>
      <commandSubTopic>/gazebo/command/motor_speed</commandSubTopic>
      <motorNumber>3</motorNumber>
      <rotorDragCoefficient>0.000175</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>/motor_speed/3</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <!--
        <gazebo_joint_control_pid>
          <p>0.1</p>
          <i>0</i>
          <d>0</d>
          <iMax>0</iMax>
          <iMin>0</iMin>
          <cmdMax>3</cmdMax>
          <cmdMin>-3</cmdMin>
        </gazebo_joint_control_pid>
      -->
    </plugin>
  </gazebo>
  <!-- <gazebo reference="rotor_${motor_number}">
      <material>Gazebo/${color}</material>
    </gazebo> -->
  <!-- IMU link -->
  <link name="/imu_link">
    <inertial>
      <inertia ixx="0.00001" ixy="0.0" ixz="0.0" iyy="0.00001" iyz="0.0" izz="0.00001"/>
      <mass value="0.015"/>
      <!-- [kg] -->
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </inertial>
  </link>
  <!-- IMU joint -->
  <joint name="/imu_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="/imu_link"/>
    <!-- <limit upper="0" lower="0" effort="0" velocity="0" /> -->
  </joint>
  <gazebo reference="/imu_joint">
    <disableFixedJointLumping>true</disableFixedJointLumping>
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo>
    <plugin filename="libgazebo_groundtruth_plugin.so" name="groundtruth_plugin">
      <robotNamespace/>
    </plugin>
    <plugin filename="libgazebo_magnetometer_plugin.so" name="magnetometer_plugin">
      <robotNamespace/>
      <pubRate>100</pubRate>
      <noiseDensity>0.0004</noiseDensity>
      <randomWalk>6.4e-06</randomWalk>
      <biasCorrelationTime>600</biasCorrelationTime>
      <magTopic>/mag</magTopic>
    </plugin>
    <plugin filename="libgazebo_barometer_plugin.so" name="barometer_plugin">
      <robotNamespace/>
      <pubRate>50</pubRate>
      <baroTopic>/baro</baroTopic>
      <baroDriftPaPerSec>0</baroDriftPaPerSec>
    </plugin>
    <plugin filename="libgazebo_mavlink_interface.so" name="mavlink_interface">
      <robotNamespace/>
      <imuSubTopic>/imu</imuSubTopic>
      <magSubTopic>/mag</magSubTopic>
      <baroSubTopic>/baro</baroSubTopic>
      <mavlink_addr>INADDR_ANY</mavlink_addr>
      <mavlink_tcp_port>4560</mavlink_tcp_port>
      <mavlink_udp_port>14560</mavlink_udp_port>
      <serialEnabled>false</serialEnabled>
      <serialDevice>/dev/ttyACM0</serialDevice>
      <baudRate>921600</baudRate>
      <qgc_addr>INADDR_ANY</qgc_addr>
      <qgc_udp_port>14550</qgc_udp_port>
      <sdk_addr>INADDR_ANY</sdk_addr>
      <sdk_udp_port>14540</sdk_udp_port>
      <hil_mode>false</hil_mode>
      <hil_state_level>0</hil_state_level>
      <send_vision_estimation>0</send_vision_estimation>
      <send_odometry>1</send_odometry>
      <enable_lockstep>1</enable_lockstep>
      <use_tcp>1</use_tcp>
      <motorSpeedCommandPubTopic>/gazebo/command/motor_speed</motorSpeedCommandPubTopic>
      <control_channels>
        <channel name="rotor1">
          <input_index>0</input_index>
          <input_offset>0</input_offset>
          <input_scaling>1000</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>100</zero_position_armed>
          <joint_control_type>velocity</joint_control_type>
        </channel>
        <channel name="rotor2">
          <input_index>1</input_index>
          <input_offset>0</input_offset>
          <input_scaling>1000</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>100</zero_position_armed>
          <joint_control_type>velocity</joint_control_type>
        </channel>
        <channel name="rotor3">
          <input_index>2</input_index>
          <input_offset>0</input_offset>
          <input_scaling>1000</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>100</zero_position_armed>
          <joint_control_type>velocity</joint_control_type>
        </channel>
        <channel name="rotor4">
          <input_index>3</input_index>
          <input_offset>0</input_offset>
          <input_scaling>1000</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>100</zero_position_armed>
          <joint_control_type>velocity</joint_control_type>
        </channel>
        <channel name="rotor5">
          <input_index>4</input_index>
          <input_offset>1</input_offset>
          <input_scaling>324.6</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>0</zero_position_armed>
          <joint_control_type>velocity</joint_control_type>
          <joint_control_pid>
            <p>0.1</p>
            <i>0</i>
            <d>0</d>
            <iMax>0.0</iMax>
            <iMin>0.0</iMin>
            <cmdMax>2</cmdMax>
            <cmdMin>-2</cmdMin>
          </joint_control_pid>
          <joint_name>zephyr_delta_wing::propeller_joint</joint_name>
        </channel>
        <channel name="rotor6">
          <input_index>5</input_index>
          <input_offset>0</input_offset>
          <input_scaling>0.524</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>0</zero_position_armed>
          <joint_control_type>position</joint_control_type>
          <joint_name>zephyr_delta_wing::flap_left_joint</joint_name>
          <joint_control_pid>
            <p>10.0</p>
            <i>0</i>
            <d>0</d>
            <iMax>0</iMax>
            <iMin>0</iMin>
            <cmdMax>20</cmdMax>
            <cmdMin>-20</cmdMin>
          </joint_control_pid>
        </channel>
        <channel name="rotor7">
          <input_index>6</input_index>
          <input_offset>0</input_offset>
          <input_scaling>0.524</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>0</zero_position_armed>
          <joint_control_type>position</joint_control_type>
          <joint_name>zephyr_delta_wing::flap_right_joint</joint_name>
          <joint_control_pid>
            <p>10.0</p>
            <i>0</i>
            <d>0</d>
            <iMax>0</iMax>
            <iMin>0</iMin>
            <cmdMax>20</cmdMax>
            <cmdMin>-20</cmdMin>
          </joint_control_pid>
        </channel>
        <channel name="rotor8">
          <input_index>7</input_index>
          <input_offset>0</input_offset>
          <input_scaling>0.524</input_scaling>
          <zero_position_disarmed>0</zero_position_disarmed>
          <zero_position_armed>0</zero_position_armed>
          <joint_control_type>position</joint_control_type>
        </channel>
      </control_channels>
    </plugin>
    <static>0</static>
    <plugin filename="libgazebo_imu_plugin.so" name="rotors_gazebo_imu_plugin">
      <robotNamespace/>
      <linkName>/imu_link</linkName>
      <imuTopic>/imu</imuTopic>
      <gyroscopeNoiseDensity>0.00018665</gyroscopeNoiseDensity>
      <gyroscopeRandomWalk>3.8785e-05</gyroscopeRandomWalk>
      <gyroscopeBiasCorrelationTime>1000.0</gyroscopeBiasCorrelationTime>
      <gyroscopeTurnOnBiasSigma>0.0087</gyroscopeTurnOnBiasSigma>
      <accelerometerNoiseDensity>0.00186</accelerometerNoiseDensity>
      <accelerometerRandomWalk>0.006</accelerometerRandomWalk>
      <accelerometerBiasCorrelationTime>300.0</accelerometerBiasCorrelationTime>
      <accelerometerTurnOnBiasSigma>0.196</accelerometerTurnOnBiasSigma>
    </plugin>
  </gazebo>
  <joint name="main_camera_joint" type="fixed">
    <origin rpy="0 1.5707963267948966 0" xyz="0.055 0.0 -0.03"/>
    <parent link="base_link"/>
    <child link="main_camera_link"/>
  </joint>
  <link name="main_camera_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.005 0.005 0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.005 0.005 0.005"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.015"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="4.15e-6" ixy="0" ixz="0" iyy="2.407e-6" iyz="0" izz="2.407e-6"/>
    </inertial>
  </link>
  <gazebo reference="main_camera_joint">
    <disableFixedJointLumping>true</disableFixedJointLumping>
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="main_camera_link">
    <sensor name="main_camera" type="camera">
      <camera>
        <horizontal_fov>2.0943951023931953</horizontal_fov>
        <image>
          <format>B8G8R8</format>
          <width>320</width>
          <height>240</height>
        </image>
        <clip>
          <near>0.02</near>
          <far>1000</far>
        </clip>
        <distortion>
          <k1>0</k1>
          <k2>0</k2>
          <k3>0</k3>
          <p1>0</p1>
          <p2>0</p2>
          <center>0.5 0.5</center>
        </distortion>
      </camera>
      <always_on>1</always_on>
      <update_rate>40</update_rate>
      <visualize>1</visualize>
      <plugin filename="libgazebo_ros_camera.so" name="camera_plugin">
        <alwaysOn>true</alwaysOn>
        <imageTopicName>image_raw</imageTopicName>
        <cameraTopicName>camera_info</cameraTopicName>
        <updateRate>40</updateRate>
        <cameraName>main_camera</cameraName>
        <frameName>/main_camera_optical</frameName>
        <CxPrime>160.5</CxPrime>
        <Cx>160.5</Cx>
        <Cy>120.5</Cy>
        <distortionK1>0</distortionK1>
        <distortionK2>0</distortionK2>
        <distortionK3>0</distortionK3>
        <distortionT1>0</distortionT1>
        <distortionT2>0</distortionT2>
        <!-- throttling_camera specific options start here -->
        <minUpdateRate>38.0</minUpdateRate>
        <windowSize>40</windowSize>
        <maxStDev>0.075</maxStDev>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="lidar_vl53l1x_joint" type="fixed">
    <origin rpy="0 1.5707963267948966 0" xyz="0.0 0.0 -0.04"/>
    <parent link="base_link"/>
    <child link="lidar_vl53l1x_link"/>
  </joint>
  <link name="lidar_vl53l1x_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.001 0.005 0.005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.001 0.001 0.005"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.015"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="4.15e-6" ixy="0" ixz="0" iyy="2.407e-6" iyz="0" izz="2.407e-6"/>
    </inertial>
  </link>
  <gazebo reference="lidar_vl53l1x_joint">
    <disableFixedJointLumping>true</disableFixedJointLumping>
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="lidar_vl53l1x_link">
    <sensor name="lidar_vl53l1x" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <ray>
        <scan>
          <horizontal>
            <samples>1</samples>
            <resolution>1</resolution>
            <min_angle>-0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.03</min>
          <!-- Note: This is a hack, since the rangefinder is inside the drone collision box -->
          <max>4.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_range.so" name="laser">
        <robotNamespace/>
        <!-- FIXME: fill namespace? -->
        <topicName>/rangefinder/range</topicName>
        <frameName>rangefinder</frameName>
        <radiation>infrared</radiation>
        <fov>0.471239</fov>
        <gaussianNoise>0.001</gaussianNoise>
        <updateRate>10</updateRate>
        <min_distance>0.01</min_distance>
        <max_distance>4.0</max_distance>
      </plugin>
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>true</visualize>
    </sensor>
  </gazebo>
  <joint name="led_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 -0.002"/>
    <parent link="base_link"/>
    <child link="led_link"/>
  </joint>
  <link name="led_link">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0001"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0.0" xyz="0.08 0.0 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.10833078115826873" xyz="0.07953103657234877 0.008649521473915341 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.21666156231653746" xyz="0.07812964445680694 0.017197635216881925 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.3249923434748062" xyz="0.0758122536946242 0.0255441224108784 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.43332312463307493" xyz="0.07260603357367656 0.03359112812482117 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.5416539057913436" xyz="0.06854857409340714 0.04124430857416174 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.6499846869496124" xyz="0.06368744525645151 0.04841393721550122 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.7583154681078811" xyz="0.058079639353850465 0.05501595670827387 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.8666462492661499" xyz="0.051790902782546215 0.06097296441021092 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 0.9749770304244185" xyz="0.04489496522899059 0.06621511985255124 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.0833078115826873" xyz="0.03747267525598321 0.07068096355568183 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.1916385927409558" xyz="0.029611052427193165 0.07431813758534332 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.2999693738992248" xyz="0.02140226708233766 0.07708399940153784 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.4083001550574936" xyz="0.01294255972422117 0.0789461218033221 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.5166309362157622" xyz="0.0043311126868334085 0.07988267310808991 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.6249617173740307" xyz="-0.004331112686833381 0.07988267310808991 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.7332924985322997" xyz="-0.012942559724221179 0.0789461218033221 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.8416232796905685" xyz="-0.02140226708233767 0.07708399940153783 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 1.949954060848837" xyz="-0.02961105242719314 0.07431813758534332 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.058284842007106" xyz="-0.037472675255983204 0.07068096355568183 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.1666156231653746" xyz="-0.044894965228990585 0.06621511985255124 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.2749464043236434" xyz="-0.05179090278254621 0.06097296441021092 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.3832771854819117" xyz="-0.05807963935385045 0.05501595670827388 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.4916079666401805" xyz="-0.06368744525645148 0.04841393721550124 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.5999387477984497" xyz="-0.06854857409340714 0.04124430857416173 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.7082695289567185" xyz="-0.07260603357367656 0.03359112812482116 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.8166003101149872" xyz="-0.0758122536946242 0.025544122410878382 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 2.9249310912732556" xyz="-0.07812964445680694 0.017197635216881942 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.0332618724315243" xyz="-0.07953103657234877 0.008649521473915353 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="-0.08 9.797174393178826e-18 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.2499234347480614" xyz="-0.07953103657234878 -0.0086495214739153 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.3582542159063307" xyz="-0.07812964445680694 -0.01719763521688192 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.4665849970645994" xyz="-0.0758122536946242 -0.025544122410878396 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.574915778222868" xyz="-0.07260603357367656 -0.03359112812482117 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.683246559381137" xyz="-0.06854857409340713 -0.041244308574161746 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.7915773405394053" xyz="-0.06368744525645152 -0.04841393721550119 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 3.899908121697674" xyz="-0.058079639353850486 -0.05501595670827385 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.008238902855943" xyz="-0.0517909027825462 -0.060972964410210925 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.116569684014212" xyz="-0.0448949652289906 -0.06621511985255124 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.22490046517248" xyz="-0.03747267525598325 -0.0706809635556818 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.333231246330749" xyz="-0.029611052427193158 -0.07431813758534332 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.4415620274890175" xyz="-0.021402267082337705 -0.07708399940153783 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.549892808647287" xyz="-0.01294255972422118 -0.0789461218033221 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.658223589805555" xyz="-0.004331112686833436 -0.07988267310808991 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.766554370963823" xyz="0.0043311126868333365 -0.07988267310808991 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.874885152122093" xyz="0.012942559724221153 -0.0789461218033221 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 4.983215933280361" xyz="0.021402267082337608 -0.07708399940153786 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.09154671443863" xyz="0.02961105242719313 -0.07431813758534332 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.199877495596899" xyz="0.037472675255983225 -0.07068096355568183 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.308208276755168" xyz="0.044894965228990585 -0.06621511985255125 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.416539057913437" xyz="0.051790902782546236 -0.0609729644102109 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.524869839071705" xyz="0.058079639353850465 -0.05501595670827387 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.6332006202299745" xyz="0.06368744525645152 -0.04841393721550119 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.741531401388243" xyz="0.06854857409340714 -0.04124430857416174 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.849862182546511" xyz="0.07260603357367655 -0.03359112812482119 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 5.95819296370478" xyz="0.0758122536946242 -0.025544122410878393 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 6.066523744863049" xyz="0.07812964445680694 -0.01719763521688195 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
    <visual>
      <origin rpy="0 0 6.174854526021317" xyz="0.07953103657234877 -0.008649521473915399 0"/>
      <geometry>
        <box size="0.006 0.006 0.006"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="led_link">
    <visual>
      <plugin filename="libsim_leds.so" name="led_controller">
        <robotNamespace/>
        <ledCount>58</ledCount>
      </plugin>
      <cast_shadows>false</cast_shadows>
      <material>
        <ambient>0 0 0 1</ambient>
        <diffuse>0 0 0 1</diffuse>
        <specular>0 0 0 1</specular>
        <emissive>0 0 0 1</emissive>
      </material>
    </visual>
  </gazebo>
  <gazebo reference="led_joint">
    <disableFixedJointLumping>true</disableFixedJointLumping>
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <!-- <gazebo>
            <static>true</static>
        </gazebo> -->
  <gazebo>
    <plugin filename="libsim_leds_controller.so" name="led_ros_controller">
      <robotNamespace/>
      <ledCount>58</ledCount>
    </plugin>
  </gazebo>
  <gazebo>
    <include>
      <uri>model://gps</uri>
      <pose>0.1 0 0 0 0 0</pose>
      <name>gps0</name>
    </include>
    <joint name="gps0_joint" type="fixed">
      <child>gps0::link</child>
      <parent>base_link</parent>
    </joint>
  </gazebo>
</robot>

