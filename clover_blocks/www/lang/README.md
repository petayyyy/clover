# Система локализации Clover Blocks

Этот модуль предоставляет систему интернационализации для Clover Blocks, позволяющую переключать язык интерфейса между английским и русским.

## Структура файлов

```
lang/
├── en-US/
│   └── translations.js    # Английские переводы
├── ru-RU/
│   └── translations.js    # Русские переводы (с комментариями для перевода)
├── i18n.js               # Основной модуль локализации
└── README.md             # Этот файл
```

## Использование

### Для пользователей

1. В правом верхнем углу интерфейса появится селектор языка
2. Выберите нужный язык из выпадающего списка
3. Интерфейс автоматически обновится без перезагрузки страницы
4. Выбранный язык сохраняется в localStorage и будет использоваться при следующих посещениях

### Для разработчиков

#### Добавление новых строк для перевода

1. Добавьте новую строку в файл `en-US/translations.js`:
```javascript
'new_string_key': 'New string text',
```

2. Добавьте соответствующую строку в файл `ru-RU/translations.js`:
```javascript
'new_string_key': 'New string text', // TODO: Translate to Russian
```

3. Используйте в коде:
```javascript
window.i18n.t('new_string_key')
```

#### Добавление параметров в строки

```javascript
// В файле переводов
'time_format': '{hours}:{minutes}:{seconds}',

// В коде
window.i18n.t('time_format', {
    hours: '12',
    minutes: '30',
    seconds: '45'
})
// Результат: "12:30:45"
```

#### Программное переключение языка

```javascript
// Переключить на русский
await window.i18n.setLanguage('ru-RU');

// Переключить на английский
await window.i18n.setLanguage('en-US');

// Получить текущий язык
const currentLang = window.i18n.getCurrentLanguage();
```

#### Подписка на изменения языка

```javascript
window.i18n.onLanguageChange(function(newLanguage) {
    console.log('Language changed to:', newLanguage);
    // Ваш код для обработки смены языка
});
```

## Перевод на русский язык

Для перевода интерфейса на русский язык:

1. Откройте файл `ru-RU/translations.js`
2. Найдите строки с комментариями `// TODO: Translate to Russian`
3. Замените английский текст на русский перевод
4. Удалите комментарии TODO после перевода

Пример:
```javascript
// Было:
'title': 'Clover Blocks', // TODO: Translate to Russian

// Стало:
'title': 'Clover Blocks',
```

## Добавление новых языков

Для добавления поддержки нового языка:

1. Создайте папку `lang/[код_языка]/` (например, `lang/de-DE/`)
2. Создайте файл `translations.js` с переводами
3. Добавьте опцию в селектор языка в `index.html`
4. Обновите логику загрузки переводов в `i18n.js`

## Технические детали

- Система использует localStorage для сохранения выбранного языка
- Переводы загружаются асинхронно при инициализации
- Интерфейс обновляется автоматически при смене языка
- Поддерживается интерполяция параметров в строках перевода
- Система имеет fallback на английский язык при отсутствии перевода

## Совместимость

- Работает с современными браузерами (ES6+)
- Совместима с существующим кодом Blockly
- Не требует дополнительных зависимостей
- Минимальное влияние на производительность
